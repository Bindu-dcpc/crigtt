<?xml version="1.0" encoding="UTF-8"?>
<beans:beans
    xmlns:aop="http://www.springframework.org/schema/aop"
    xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:c="http://www.springframework.org/schema/c"
    xmlns:context="http://www.springframework.org/schema/context"
    xmlns:lang="http://www.springframework.org/schema/lang"
    xmlns:p="http://www.springframework.org/schema/p"
    xmlns:task="http://www.springframework.org/schema/task"
    xmlns:util="http://www.springframework.org/schema/util"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd
        http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang.xsd
        http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task.xsd
        http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util.xsd">
    
    <!--====================================================================================================
    = TRANSFORMER FACTORIES
    =====================================================================================================-->
    <beans:bean id="transformerFactory" class="javax.xml.transform.TransformerFactory" abstract="true"/>
    
    <beans:bean id="transformerFactoryCrigtt" class="gov.hhs.onc.crigtt.transform.impl.CrigttTransformerFactory"
        c:config-ref="configCrigtt"/>
    
    <!--====================================================================================================
    = TRANSFORMERS
    =====================================================================================================-->
    <beans:bean id="transformer" class="javax.xml.transform.Transformer" abstract="true"/>
    
    <beans:bean id="transformerSchematronValidationReport" parent="transformer" factory-bean="transformerFactoryCrigtt" factory-method="newXmlTransformer"/>
    
    <beans:bean id="transformerSchematronValidationReportHtml" parent="transformer" factory-bean="transformerFactoryCrigtt" factory-method="newHtmlTransformer">
        <beans:constructor-arg name="src">
            <beans:bean parent="srcResource"
                c:resource="classpath:META-INF/crigtt/schematron/iso-schematron-xslt2/svrl_to_html.xsl"/>
        </beans:constructor-arg>
    </beans:bean>
    
    <!--====================================================================================================
    = PROCESSORS
    =====================================================================================================-->
    <beans:bean id="processor" class="net.sf.saxon.s9api.Processor" abstract="true"/>
    
    <beans:bean id="processorCrigtt" parent="processor"
        c:config-ref="configCrigtt"/>
    
    <!--====================================================================================================
    = XSLT COMPILERS
    =====================================================================================================-->
    <beans:bean id="xsltCompiler" class="net.sf.saxon.s9api.XsltCompiler" abstract="true"/>
    
    <beans:bean id="xsltCompilerCrigtt" parent="xsltCompiler" factory-bean="processorCrigtt" factory-method="newXsltCompiler"/>
    
    <!--====================================================================================================
    = STYLESHEETS
    =====================================================================================================-->
    <beans:bean id="stylesheet" class="net.sf.saxon.s9api.XsltExecutable" abstract="true"/>
    
    <beans:bean id="stylesheetSchematronInclude" parent="stylesheet" factory-bean="xsltCompilerCrigtt" factory-method="compile">
        <beans:constructor-arg name="source">
            <beans:bean parent="srcResource"
                c:resource="classpath:META-INF/crigtt/schematron/iso-schematron-xslt2/iso_dsdl_include.xsl"/>
        </beans:constructor-arg>
    </beans:bean>
    
    <beans:bean id="stylesheetSchematronExpand" parent="stylesheet" factory-bean="xsltCompilerCrigtt" factory-method="compile">
        <beans:constructor-arg name="source">
            <beans:bean parent="srcResource"
                c:resource="classpath:META-INF/crigtt/schematron/iso-schematron-xslt2/iso_abstract_expand.xsl"/>
        </beans:constructor-arg>
    </beans:bean>
    
    <beans:bean id="stylesheetSchematronValidationReport" parent="stylesheet" factory-bean="xsltCompilerCrigtt" factory-method="compile">
        <beans:constructor-arg name="source">
            <beans:bean parent="srcResource"
                c:resource="classpath:META-INF/crigtt/schematron/iso-schematron-xslt2/iso_svrl_for_xslt2.xsl"/>
        </beans:constructor-arg>
    </beans:bean>
</beans:beans>