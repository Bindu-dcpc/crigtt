<?xml version="1.0" encoding="UTF-8"?>
<configuration
    debug="false"
    scan="true"
    scanPeriod="30 seconds"
    xmlns="ch.qos.logback">
    
    <!--====================================================================================================
    = CONTEXT NAME
    =====================================================================================================-->
    <contextName>crigtt</contextName>
    
    <!--====================================================================================================
    = PROPERTIES: CONSOLE
    =====================================================================================================-->
    <if condition='!isDefined("crigtt.logging.console.tty") &amp;&amp; (java.lang.System.console() != null)'>
        <then>
            <property name="crigtt.logging.console.tty" value="true" scope="context"/>
        </then>
    </if>
    
    <!--====================================================================================================
    = PROPERTIES: FILE
    =====================================================================================================-->
    <property name="crigtt.logging.file.dir" value="${crigtt.logging.file.dir:-${user.dir}}" scope="context"/>
    
    <property name="crigtt.logging.file.name" value="${crigtt.logging.file.name:-${CONTEXT_NAME}}" scope="context"/>
    
    <property name="crigtt.logging.file.name.ext" value="${crigtt.logging.file.name.ext:-.log}" scope="context"/>
    
    <!--====================================================================================================
    = CONVERSION RULES
    =====================================================================================================-->
    <conversionRule conversionWord="exRoot" converterClass="gov.hhs.onc.crigtt.logging.impl.RootCauseThrowableProxyConverter"/>
    
    <conversionRule conversionWord="pColor" converterClass="gov.hhs.onc.crigtt.logging.impl.PriorityColorCompositeConverter"/>
    
    <!--====================================================================================================
    = STATUS LISTENERS
    =====================================================================================================-->
    <statusListener class="ch.qos.logback.core.status.NopStatusListener"/>
    
    <!--====================================================================================================
    = CONTEXT LISTENERS
    =====================================================================================================-->
    <contextListener class="ch.qos.logback.classic.jul.LevelChangePropagator">
        <resetJUL>true</resetJUL>
    </contextListener>
    
    <!--====================================================================================================
    = APPENDERS: CONSOLE
    =====================================================================================================-->
    <appender name="console" class="ch.qos.logback.core.ConsoleAppender">
        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
            <pattern>%pColor(%p){${crigtt.logging.console.tty:-false}} - %m%n%exRoot</pattern>
        </encoder>
        <target>System.out</target>
        <withJansi>true</withJansi>
    </appender>
    
    <!--====================================================================================================
    = APPENDERS: FILE
    =====================================================================================================-->
    <appender name="file" class="ch.qos.logback.core.FileAppender">
        <file>${crigtt.logging.file.dir}/${crigtt.logging.file.name}${crigtt.logging.file.name.ext}</file>
        <encoder class="ch.qos.logback.classic.encoder.PatternLayoutEncoder">
            <pattern>%d{yyyy-MM-dd HH:mm:ss z} [%C:%L %t] %p - %m%n%exRoot</pattern>
        </encoder>
    </appender>
    
    <!--====================================================================================================
    = LOGGERS: PROJECT
    =====================================================================================================-->
    <logger name="gov.hhs.onc.crigtt" level="all" additivity="false">
        <appender-ref ref="console"/>
        <appender-ref ref="file"/>
    </logger>
    
    <logger name="gov.hhs.onc.crigtt.xml.impl.CrigttJaxbMarshaller" level="warn" additivity="false">
        <appender-ref ref="console"/>
        <appender-ref ref="file"/>
    </logger>
    
    <!--====================================================================================================
    = LOGGERS: SAXON
    =====================================================================================================-->
    <logger name="net.sf.saxon" level="info" additivity="false">
        <appender-ref ref="console"/>
        <appender-ref ref="file"/>
    </logger>
    
    <!--====================================================================================================
    = LOGGERS: APACHE
    =====================================================================================================-->
    <logger name="org.apache" level="info" additivity="false">
        <appender-ref ref="console"/>
        <appender-ref ref="file"/>
    </logger>
    
    <!--====================================================================================================
    = LOGGERS: APACHE CXF
    =====================================================================================================-->
    <logger name="org.apache.cxf" level="info" additivity="false">
        <appender-ref ref="console"/>
        <appender-ref ref="file"/>
    </logger>
    
    <!--====================================================================================================
    = LOGGERS: SPRING FRAMEWORK
    =====================================================================================================-->
    <logger name="org.springframework" level="info" additivity="false">
        <appender-ref ref="console"/>
        <appender-ref ref="file"/>
    </logger>
    
    <logger name="org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker" level="warn" additivity="false">
        <appender-ref ref="console"/>
        <appender-ref ref="file"/>
    </logger>
    
    <!--====================================================================================================
    = ROOT LOGGER
    =====================================================================================================-->
    <root level="warn">
        <appender-ref ref="console"/>
        <appender-ref ref="file"/>
    </root>
</configuration>